<div class="profile-dashboard container" *ngIf="user">
  <!-- Header Section -->
  <div class="dashboard-header d-flex align-items-center justify-content-between px-4 py-4 text-white shadow-sm">
    <div>
      <h2 class="fw-bold mb-1 animate-fade-in">Hi, {{ user.firstName }}!</h2>
      <p class="mb-0">Welcome back to your dashboard.</p>
    </div>
    <div class="d-flex align-items-center gap-3">
      <button class="btn btn-light rounded-circle" (click)="enableEdit()" title="Edit Profile">
        <i class="bi bi-pencil fs-5 text-dark"></i>
      </button>
      <button class="btn btn-danger rounded-circle" (click)="deleteAccount()" title="Delete Account">
        <i class="bi bi-trash fs-5"></i>
      </button>
      <img [src]="getProfileImage()" alt="Profile Picture" class="profile-pic shadow" />
    </div>
  </div>

  <!-- Main Content -->
  <div class="profile-content card mt-4 p-4 shadow-sm animate-slide-up">
    <form *ngIf="editing; else viewMode" (ngSubmit)="saveChanges()">
      <div class="row g-4">
        <div class="col-md-6">
          <label class="form-label">First Name</label>
          <input class="form-control" [(ngModel)]="user.firstName" name="firstName" required />
        </div>
        <div class="col-md-6">
          <label class="form-label">Last Name</label>
          <input class="form-control" [(ngModel)]="user.lastName" name="lastName" required />
        </div>
        <div class="col-md-6">
          <label class="form-label">Email</label>
          <input class="form-control" [(ngModel)]="user.email" name="email" required />
        </div>
        <div class="col-md-6">
          <label class="form-label">Joined</label>
          <input class="form-control" [(ngModel)]="user.joined" name="joined" disabled />
        </div>
        <div class="col-md-6">
          <label class="form-label">Gender</label>
          <select class="form-select" [(ngModel)]="user.gender" name="gender" required>
            <option value="" disabled>Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
      </div>

      <div class="mt-4 text-end">
        <button type="submit" class="btn btn-success me-2">Save Changes</button>
        <button type="button" class="btn btn-outline-secondary" (click)="editing = false">Cancel</button>
      </div>
    </form>

    <!-- View Mode -->
    <ng-template #viewMode>
      <div class="row g-4">
        <div class="col-md-6">
          <p><strong>First Name:</strong> {{ user.firstName }}</p>
          <p><strong>Email:</strong> {{ user.email }}</p>
          <p><strong>Gender:</strong> {{ user.gender }}</p>
        </div>
        <div class="col-md-6">
          <p><strong>Last Name:</strong> {{ user.lastName }}</p>
          <p><strong>Joined:</strong> {{ user.joined }}</p>
        </div>
      </div>
    </ng-template>
  </div>

  <!-- Footer -->
  <footer class="text-center mt-5 p-3 small text-muted">
    © 2025 Learn Now • Made with ❤️ for learning
  </footer>
</div>
